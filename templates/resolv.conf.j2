# resolv.conf by ansible
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
{% if system_network_local_dns %}
nameserver 127.0.0.1
nameserver {{ ansible_facts['default_ipv4']['address'] }}
{% endif %}
{% if system_network_dns %}
{% for ns in system_network_dns %}{% if ('127.0.0.1' not in ns) and (ansible_facts['default_ipv4']['address'] not in ns) %}
nameserver {{ ns }}
{% endif %}{% endfor %}
{% else %}
nameserver 1.1.1.1
{% endif %}
{% if system_network_search_dns and ansible_facts['dns']['search'] is defined and ansible_facts['dns']['search']|length > 0 %}
search{% for search in ansible_facts['dns']['search'] %} {{ search }}{% endfor %}

{% endif %}
options timeout:5 attempts:3
